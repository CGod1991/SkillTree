# HTTP 协议

标签：HTTP

---

## HTTP: Web 的基础

### 概述

#### HTTP

HTTP：Hypertext Transfer Protocol，超文本传输协议，是在万维网上进行通信时所使用的协议方案。Web 浏览器、服务器和相关的 Web 应用程序都是通过 HTTP 相互通信的。HTTP 是现代全球因特网中使用的公共语言，使用可靠的数据传输协议。

HTTP 是个应用层协议，无需操心网络通信的具体细节，它把具体的联网操作都交给了通用的、可靠的因特网传输协议 TCP/IP。

#### 媒体类型

因特网上有数千种不同的数据类型，HTTP 仔细地给每种要通过 Web 传输的对象都打上了名为MIME类型的数据格式标签。最初 MIME（Multipurpose Internet Mail Extension，多用途因特网邮件扩展）是为了解决在不同的电子邮件系统之间搬移报文时存在的问题，HTTP 也采纳了它，用来描述并标记多媒体内容。

Web 浏览器从服务器中取回一个对象时，会去查看相关的 MIME 类型，以此来判断其是否知道如何处理该对象。MIME 类型是一种文本标记，表示一种主要的对象类型和一个特定的子类型，中间用斜杠（/）分隔。常见的有：

> - HTML 格式的文本文档由 text/html 类型来标记。
> - 普通的 ASCII 文本文档由 text/plain 类型来标记。
> - JPEG 版本的图片为 image/jpeg 类型。

#### URI

服务器名称被称为统一资源标识符（Uniform Resource Identifier，URI）。URI 有两种形式，分别为 URL 和 URN。

统一资源定位符（Uniform Resource Locator，URL）是URI最常见的形式，说明了如何从一个精确、固定的位置获取资源，现在几乎所有的 URI 都是 URL 。大部分 URL 都遵循一种标准格式，主要包含以下三部分：

> - 第一部分称为 scheme ，说明了访问资源所使用的协议类型。通常为HTTP协议（http://）。
> - 第二部分给出了服务器的因特网地址，如：www.baidu.com、123.4.5.6 。
> - 其余部分指定了 Web 服务器上的某个资源，如：/tools.html

统一资源名（Uniform Resource Name）是第二种 URI，作为特定内容的唯一名称使用，与目前的资源所在地无关。

#### 方法

每条 HTTP 请求报文都包含一个方法，该方法会告诉服务器要执行什么动作。常见的 HTTP 方法有以下五种：

> - GET：从服务器向客户端发送命名资源。
> - PUT：将来自客户端的数据存储到一个命名的服务器资源中去。
> - DELETE：从服务器中删除命名资源。
> - POST：将客户端的数据发送到一个服务器网关应用程序。
> - HEAD：仅发送命名资源响应中的 HTTP 首部。

#### 报文

HTTP 报文都是由一行一行的简单字符串组成的，都是纯文本，不是二进制代码。主要包含以下三部分：

> - 起始行：报文的第一行，在请求报文中用来说明要做什么，在响应报文中用来说明出现了什么情况。
> - 首部字段：位于起始行之后，可以有零个或多个，以一个空行为结束。每个首部字段包含一个名字和一个值，两者之间用冒号（：）分隔。
> - 主体：首部字段之后是可选的主体，其中包含了所有类型的数据。在请求主体中，是客户端要发送给 Web 服务器的数据；在响应主体中装载了要返回给客户端的数据。

#### 连接

在 HTTP 客户端向服务器发送报文数据之前，需要用网际协议（Internet Protocol，IP）地址和端口号在客户端和服务器之间建立一条 TCP/IP 连接。可通过URL来获取服务器的IP地址和端口号。

#### Web 的结构组件

一些比较重要的 Web 应用程序：

> - 代理：位于客户端和服务器端的 HTTP 中间实体。
> - 缓存：HTTP 仓库，使常用页面的副本可以保存在离客户端更近的地方。
> - 网关：连接其他应用程序的特殊 Web 服务器。
> - 隧道：对 HTTP 通信报文进行盲转发的特殊代理。
> - Agent 代理：发起自动 HTTP 请求的半智能 Web 客户端。

## URL 与资源

#### URL 的语法

URL 提供了一种定位因特网上任意资源的手段，这些资源是可以通过各种不同的方案（HTTP、FTM、SMTP）来访问的。大多数的 URL 方案的语法都建立在由以下 9 部分构成的通用格式上：

	<scheme>://<user>:<password>@<host>:<port>/<path>;<params>?<query>#<frag>

#### 编码机制

URL 通过一种转义表示法来表示不安全的字符，这种转义表示法包含一个百分号（%），后面跟着两个表示字符的ASCII码的十六进制数。

## HTTP 报文

#### 
