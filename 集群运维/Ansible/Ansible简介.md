# Ansible 简介

标签：ansible 自动化运维

## 概述

Ansible 是基于 Python 开发的自动化运维工具，集合了众多运维工具（如puppet、cfengine、chef、func、fabric等）的优点，实现了批量系统配置、批量程序部署、批量运行命令等功能。

Ansible 只是提供了一种框架，本身没有批量部署的能力。Ansible 是基于模块工作的，真正具有批量功能的是其所运行的这些模块，主要包括以下模块：
- connection plugins：连接插件，负责和被监控端实现通信。
- host inventory：指定操作的主机，是一个配置文件里面定义监控的主机。
- playbook：剧本，可以让节点一次性运行多个任务。
- 各种核心模块、command 模块、自定义模块等。
- 借助于插件完成记录日志、邮件等功能。

## 优点

相比于传统的自动化运维工具，Ansible 具有以下的优点：
- 轻量级，无需在客户端安装 agent。因此，更新时只需要在操作机上进行一次更新即可。
- 批量任务可以写成脚本，而且不用分发到远程就可以执行。
- 使用 Python 编写，维护简单。

## 任务执行流程

1、读取配置。
2、抓取全量机器和分组列表：可以从多个静态文件、文件夹和脚本中读取机器分组及其关联变量信息。
3、使用 host-parttern 过滤机器列表。
4、根据参数确定执行模块和配置：从 modules 目录动态读取，用户可以自行开发模块。
5、Runner 执行返回。
6、输出结束。