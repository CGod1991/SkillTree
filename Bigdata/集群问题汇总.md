# 集群问题汇总

标签：问题

---

## HDFS

### NameNode 本地磁盘空间不足

错误信息：
```shell
Resources are low on NN. Please add or free up more resources then turn off safe mode manually. NOTE:  If you turn off safe mode before adding resources, the NN will immediately return to safe mode. Use "hdfs dfsadmin -safemode leave" to turn safe mode off.
```

问题原因：

	主要是由于 NameNode 节点上的本地磁盘空间不足导致。

解决方法：

	清理 NameNode 所在节点上的本地磁盘上的无用文件，使本地磁盘的使用率低于 100%。然后执行命令 `hdfs dfsadmin -safemode leave` 手动退出安全模式。

## YARN

### 无法查看任务历史日志

错误信息：
```shell
Logs not available for job_1498722270147_125756. Aggregation may not be complete, Check back later or try the nodemanager at xy180-wecloud-82:49950
Or see application log at http://xy180-wecloud-82:49950/node/application/application_1498722270147_125756
```

问题原因：

	在 HDFS 上的聚合日志中，没有 application_1498722270147_125756 对应的日志，可能原因是此时聚合日志还未生成或该聚合日志已超过最大保留时间。

解决方法：

	在 yarn-site.xml 文件中有一个属性控制着 HDFS 上聚合日志的保留时间：yarn.log-aggregation.retain-seconds，检查该属性配的值，适当增大该值。