# 思考随笔

标签：大数据
 
---

问题：
> HBase 一次 get 涉及到 3 个 HFile，但 Region 上有 10 个 HFile，那么在存在 Row 级别的 BloomFilter 的情况下，HFile 的 seek 会发生几次？

思考过程：
首先明确一下需要的辅助知识：

Bloom Filter：
> Bloom Filter 的作用是回答要查找的行是否不在某个数据块：要么回答不在，要么回答不知道。也就是说，Bloom Filter 是一种反向测试，这主要是由于 Bloom Filter 的原理导致的。
> 
> 简单说就是，Bloom Filter 机制本身是有错误率的，它有可能会把不属于该数据块的行误认为属于该数据块，但并不会把属于该数据块的行误认为不属于该数据块。

> Bloom Filter 的原理可以简单描述如下：
> 1. 首先初始化一个 m 位的位数组，数组中的每一位都置为 0；
> 2. 对于给定的元素集合 S 中的每个元素，Bloom Filter 会使用 k 个哈希函数将其映射到 [1, m] 的范围内，并将数组中对应位（总共有 k 个位）的内容置为1；
> 3. 当需要判断某个元素是否属于集合 S 时，只需要使用这 k 个哈希函数对其映射到 [1, m] 范围内，并检查在数组中这对应的 k 个对应的位的值是否为1，如果有一个不是 1，则说明该元素肯定不在集合 S 内。

